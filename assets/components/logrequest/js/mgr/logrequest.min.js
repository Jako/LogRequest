/*!
 * LogRequest - Log request parameter values and display them in the Dashboard
 * Version: 1.1.0
 * Build date: 2022-01-13
 */
var logrequest=function(e){logrequest.superclass.constructor.call(this,e=e||{})};Ext.extend(logrequest,Ext.Component,{initComponent:function(){this.stores={},this.ajax=new Ext.data.Connection({disableCaching:!0})},page:{},window:{},grid:{},tree:{},panel:{},combo:{},config:{},util:{},form:{}}),Ext.reg("logrequest",logrequest),LogRequest=new logrequest,MODx.grid.Logrequest=function(e){e=e||{},Ext.applyIf(e,{id:"logrequest-grid-"+e.type,url:e.connector_url,baseParams:{action:"mgr/"+e.type+"/getlist"},cls:"modx-grid modx-grid-small modx"+LogRequest.config.modxversion,fields:["value","loggedon"],showActionsColumn:!1,columns:[{header:_("logrequest.widget.value"),dataIndex:"value",width:250},{header:_("logrequest.widget.date"),dataIndex:"loggedon",renderer:Ext.util.Format.dateRenderer(MODx.config.manager_date_format+" "+MODx.config.manager_time_format),width:100}],paging:!0,pageSize:6,showPerPage:!1,listeners:{afterrender:this.onAfterRender,scope:this},type:"log"}),MODx.grid.Logrequest.superclass.constructor.call(this,e)},Ext.extend(MODx.grid.Logrequest,MODx.grid.Grid,{onAfterRender:function(e,t,o){var r=Ext.getCmp("modx-content"),g=Ext.get("modx-grid-logrequest-"+this.config.type);r&&g&&(r.on("afterlayout",function(){var e=g.getWidth();400<e&&this.setWidth(e)},this),r.on("resize",function(){var e=g.getWidth();400<e&&this.setWidth(e)},this)),Ext.get("dashboard-block-treehillstudio-"+this.config.type).select(".treehillstudio-widget-about").on("click",function(){var e='<span style="display: inline-block; text-align: center"><img src="'+LogRequest.config.assetsUrl+'img/mgr/treehill-studio.png" srcset="'+LogRequest.config.assetsUrl+'img/mgr/treehill-studio@2x.png 2x" alt="Treehill Studio"><br>&copy; 2016-2022 by <a href="https://treehillstudio.com" target="_blank">treehillstudio.com</a></span>';Ext.Msg.show({title:_("logrequest")+" "+LogRequest.config.version,msg:e,buttons:Ext.Msg.OK,cls:"treehillstudio_window",width:358})})}}),Ext.reg("modx-grid-logrequest",MODx.grid.Logrequest),MODx.grid.LogrequestRank=function(e){e=e||{},Ext.applyIf(e,{fields:["value","count"],columns:[{header:_("logrequest.widget.value"),dataIndex:"value",width:250},{header:_("logrequest.widget.count"),dataIndex:"count",width:100}],type:"rank"}),MODx.grid.LogrequestRank.superclass.constructor.call(this,e)},Ext.extend(MODx.grid.LogrequestRank,MODx.grid.Logrequest,{}),Ext.reg("modx-grid-logrequest-rank",MODx.grid.LogrequestRank),MODx.grid.LogrequestLog=function(e){e=e||{},Ext.applyIf(e,{fields:["value","loggedon"],columns:[{header:_("logrequest.widget.value"),dataIndex:"value",width:250},{header:_("logrequest.widget.date"),dataIndex:"loggedon",renderer:Ext.util.Format.dateRenderer(MODx.config.manager_date_format+" "+MODx.config.manager_time_format),width:100}],type:"log"}),MODx.grid.LogrequestLog.superclass.constructor.call(this,e)},Ext.extend(MODx.grid.LogrequestLog,MODx.grid.Logrequest,{}),Ext.reg("modx-grid-logrequest-log",MODx.grid.LogrequestLog);